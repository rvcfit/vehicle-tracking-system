{
  "id": null,
  "title": "Vehicle Tracking - Infra & Messaging Health",
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "10s",
  "panels": [
    {
      "type": "row",
      "title": "Infrastructure Health",
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 1
    },
    {
      "id": 2,
      "type": "stat",
      "title": "MongoDB Up",
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 0,
        "y": 1
      },
      "targets": [
        {
          "expr": "up{job=\"mongodb\"}",
          "refId": "A"
        }
      ]
    },
    {
      "id": 3,
      "type": "stat",
      "title": "RabbitMQ Up",
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 4,
        "y": 1
      },
      "targets": [
        {
          "expr": "up{job=\"rabbitmq\"}",
          "refId": "A"
        }
      ]
    },
    {
      "id": 4,
      "type": "stat",
      "title": "Artemis Up",
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 8,
        "y": 1
      },
      "targets": [
        {
          "expr": "up{job=\"artemis\"}",
          "refId": "A"
        }
      ]
    },
    {
      "id": 5,
      "type": "stat",
      "title": "Prometheus Up",
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 12,
        "y": 1
      },
      "targets": [
        {
          "expr": "up{job=\"prometheus\"}",
          "refId": "A"
        }
      ]
    },
    {
      "id": 6,
      "type": "stat",
      "title": "Grafana Up",
      "gridPos": {
        "h": 3,
        "w": 4,
        "x": 16,
        "y": 1
      },
      "targets": [
        {
          "expr": "up{job=\"grafana\"}",
          "refId": "A"
        }
      ]
    },
    {
      "id": 10,
      "type": "row",
      "title": "Messaging - AMQ & RabbitMQ",
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 4
      }
    },
    {
      "id": 11,
      "type": "graph",
      "title": "RabbitMQ Messages Published",
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 5
      },
      "targets": [
        {
          "expr": "rate(rabbitmq_queue_messages_published_total[1m])",
          "refId": "A"
        }
      ]
    },
    {
      "id": 12,
      "type": "graph",
      "title": "RabbitMQ Messages Consumed",
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 5
      },
      "targets": [
        {
          "expr": "rate(rabbitmq_queue_messages_delivered_total[1m])",
          "refId": "A"
        }
      ]
    },
    {
      "id": 20,
      "type": "row",
      "title": "Vehicle Events by Plate / Channel",
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 12
      }
    },
    {
      "id": 21,
      "type": "table",
      "title": "Events by Plate (sample metric)",
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 13
      },
      "targets": [
        {
          "expr": "sum by (plate) (vehicle_events_total)",
          "refId": "A"
        }
      ]
    },
    {
      "id": 22,
      "type": "table",
      "title": "Events by Channel (sample metric)",
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 13
      },
      "targets": [
        {
          "expr": "sum by (channel) (vehicle_events_total)",
          "refId": "A"
        }
      ]
    }
  ]
}